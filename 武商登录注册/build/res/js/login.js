var wrongTips;
$(function(){function h(a){b.hide();var c="",c=a.rurl?a.rurl:"/index.jsp";b.html("").removeClass("wrongTips");d.removeAttr("style");window.location.href=c}function n(){var a=$("#scanCode").val();$.get("/"+appId+"/handler/checkLogin.jsx",{code:a},function(a){"ok"==a.state?(a="/",window.returnUrl&&""!=window.returnUrl&&(a=window.returnUrl),document.location.href=a):"err"==a.state&&alert("\u767b\u5f55\u5931\u8d25\uff0c\u5237\u65b0\u9875\u9762\u518d\u8bd5\u4e00\u8bd5\uff01")},"json")}function p(){$.get("/"+appId+
"/ajax/getUUID.jsx",function(a){$("#scanCode").val(a);$(".qrcode-img").empty().qrcode({render:"image",size:200,text:window.normalWebSite+"/"+appId+"/handler/scanLogin.jsx?code\x3d"+a,background:"#FFFFFF"})})}function q(){$(".qrcode-img-failure").show();clearInterval(k)}function r(){$.get("/"+appId+"/ajax/getUUID.jsx",function(a){s=a;$("#codeView").empty().qrcode({render:"image",size:200,text:webUrl+"/wechatInterface/handler/scanCodeLogin.jsx?scanCode\x3d"+a,background:"#FFFFFF"})});l=setInterval(t,
1E3);setTimeout(u,12E4)}function t(){$.get("/"+appId+"/handler/wxScanLoginCheck.jsx",{scanCode:s},function(a){"ok"==a.state&&(a="/",window.returnUrl&&""!=window.returnUrl&&(a=window.returnUrl),document.location.href=a)},"json")}function u(){$("#weixinRefreshScanCode").show();clearInterval(l)}wrongTips=$("#wrongTips");var e=$("#margin-top"),m=$("#loginForm");$(m).ajaxForm({type:"post",url:"/"+appId+"/handler/login_handler.jsx",dataType:"json",beforeSubmit:function(){var a=$("#phone").val(),b=$("#password").val();
if(""==a)return wrongTips.show(),wrongTips.find("p").html("\u8bf7\u8f93\u5165\u767b\u9646\u8d26\u53f7"),!1;if(""==b)return wrongTips.show(),wrongTips.find("p").html("\u8bf7\u8f93\u5165\u5bc6\u7801"),!1;wrongTips.html("").removeClass("wrongTips");return!0},success:function(a){if("err"==a.state)wrongTips.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u767b\u9646\u6ce8\u518capp\u6ca1\u6709\u6743\u9650").addClass("wrongTips");else if(a.state){wrongTips.hide();var b="",b=a.returnUrl&&""!=a.returnUrl?a.returnUrl:
"/";document.location.href=b;wrongTips.html("").removeClass("wrongTips");e.removeAttr("style")}else"data_error"==a.errorCode?(e.css("margin-top","10px"),wrongTips.show(),wrongTips.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u7528\u6237\u6570\u636e\u5f02\u5e38\uff0c\u8bf7\u4e0e\u5ba2\u670d\u8054\u7cfb").addClass("wrongTips")):"member_error"==a.errorCode?(e.css("margin-top","10px"),wrongTips.show(),wrongTips.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u60a8\u8f93\u5165\u7684\u8d26\u53f7\u6216\u5bc6\u7801\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165").addClass("wrongTips"),
$("#phone").focus()):"not_enabled"==a.errorCode?(e.css("margin-top","10px"),wrongTips.show(),wrongTips.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u7528\u6237\u5904\u4e8e\u51bb\u7ed3\u72b6\u6001\uff0c\u4e0d\u80fd\u767b\u5f55").addClass("wrongTips")):"system_error"==a.errorCode?(e.css("margin-top","10px"),wrongTips.show(),wrongTips.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5").addClass("wrongTips")):"captcha_error"==a.errorCode?(e.css("margin-top",
"10px"),wrongTips.show(),wrongTips.html("\x3ci class\x3d'ico-tips' \x3e\x3c/i\x3e\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e").addClass("wrongTips")):"password_null"==a.errorCode&&(e.css("margin-top","10px"),wrongTips.show(),wrongTips.html("\x3ci class\x3d'ico-tips' \x3e\x3c/i\x3e\u8bf7\u4f7f\u7528\u77ed\u4fe1\u9a8c\u8bc1\u7801\u767b\u5f55").addClass("wrongTips"))}});var d=$("#margin-top2"),b=$("#wrongTips2"),m=$("#loginForm2");$(m).ajaxForm({type:"post",url:"/"+appId+"/handler/login_Mobile_handler.jsx",
dataType:"json",beforeSubmit:function(){var a=$("#phone2").val(),c=$("#mobileValidateCode").val();if(""==a)return b.show(),d.css("margin-top","10px"),b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u8bf7\u8f93\u5165\u624b\u673a\u53f7").addClass("login-msg error-msg"),!1;if(""==c)return b.show(),d.css("margin-top","10px"),b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801").addClass("login-msg error-msg"),!1;b.hide();d.removeAttr("style");b.html("").removeClass("login-msg error-msg");
return!0},success:function(a){"0"==a.code?"1"==a.isNeedShowWin?($("#msgPanel").show(),$("body").on("click","#odgray_btn",function(){$.post("/"+appId+"/handler/saveSign_handler.jsx",{},function(b){"0"==b.code&&h(a)},"json")})):h(a):"101"==a.code?(b.show(),d.css("margin-top","10px"),b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7\uff01").addClass("login-msg error-msg")):"102"==a.code?(b.show(),d.css("margin-top","10px"),b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u77ed\u4fe1\u9a8c\u8bc1\u7801\u4e3a\u7a7a\uff01").addClass("login-msg error-msg"),
$("#phone2").focus()):"103"==a.code?(b.show(),d.css("margin-top","10px"),b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u8bf7\u5148\u70b9\u51fb\u83b7\u53d6\u9a8c\u8bc1\u7801\uff01").addClass("login-msg error-msg")):"105"==a.code?(b.show(),d.css("margin-top","10px"),b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u53d1\u9001\u3002").addClass("wronlogin-msg error-msggTips")):"104"==a.code||"106"==a.code?(b.show(),d.css("margin-top",
"10px"),b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u77ed\u4fe1\u9a8c\u8bc1\u7801\u9519\u8bef\u3002").addClass("login-msg error-msg")):"107"==a.code?(b.show(),d.css("margin-top","10px"),b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u624b\u673a\u53f7\u7801\u4e0d\u662f\u63a5\u6536\u77ed\u4fe1\u7684\u624b\u673a\u53f7\u3002").addClass("login-msg error-msg")):(b.show(),d.css("margin-top","10px"),b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002").addClass("login-msg error-msg"))}});
var v=JigsawValidateUtil({getImgUrl:"/JigsawValidateUtilPlugin/handler/gi.jsx",postUrl:"/"+appId+"/handler/getLogMobileCaptcha.jsx",httpStyle:"post",success:function(a){if("0"==a.code){b.hide();d.removeAttr("style");alert("\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u6210\u529f\u53d1\u51fa\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\u77ed\u4fe1\u3002");f=!0;var c=Number(window.msgInterval);$("#sendCode").html(--c+"\u79d2");$("#sendCode").css("color","#CCC");var e=setInterval(function(){c--;$("#sendCode").html(c+
"\u79d2");0>=c&&(clearInterval(e),$("#sendCode").html("\u83b7\u53d6\u9a8c\u8bc1\u7801"),$("#sendCode").css("color","#fff"),f=!1)},1E3)}else{var g="";"101"==a.code?g="\u8bf7\u586b\u5199\u60a8\u7684\u624b\u673a\u53f7\u7801":"102"==a.code?g="\u60a8\u8f93\u5165\u7684\u624b\u673a\u53f7\u7801\u6709\u8bef,\u8bf7\u91cd\u65b0\u8f93\u5165\u3002":"103"==a.code?(g="\u53d1\u9001\u592a\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002",f=!0,c=Number(window.msgInterval),$("#sendCode").html(--c+"\u79d2"),$("#sendCode").css("color",
"#CCC"),e=setInterval(function(){c--;$("#sendCode").html(c+"\u79d2");0>=c&&(clearInterval(e),$("#sendCode").html("\u83b7\u53d6\u9a8c\u8bc1\u7801"),$("#sendCode").css("color","#fff"),f=!1)},1E3)):g="104"==a.code?"\u77ed\u4fe1\u9a8c\u8bc1\u7801\u8fd8\u5728\u6709\u6548\u671f\u3002":"\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002";b.show();d.css("margin-top","10px");b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e"+g).addClass("login-msg error-msg")}}}),f=!1;$("#sendCode").on("click",
function(){var a=$("#phone2").val();if(""==a)return b.show(),d.css("margin-top","10px"),b.html("\x3ci class\x3d'ico-tips'\x3e\x3c/i\x3e\u8bf7\u8f93\u5165\u624b\u673a\u53f7").addClass("login-msg error-msg"),!1;f||(a=$.trim(a),a=acV+"#"+a+"#"+acV,a={p:encrypt($.trim(a),kkV,iI)},v.show(a));return!1});$("#PCForm li a").on("click",function(){$("#PCForm li a").removeClass("active");$(this).addClass("active");-1<$(this).attr("id").indexOf("sms")?($(".sms").show(),$(".account").hide()):($(".sms").hide(),
$(".account").show())});p();var k;$("#_loginWay").find("i").bind("click",function(){var a=$(this).attr("id"),b="\u626b\u7801\u767b\u5f55\u66f4\u5b89\u5168";-1<a.indexOf("QR")?(b="\u5bc6\u7801\u548c\u77ed\u4fe1\u767b\u5f55\u5728\u8fd9\u91cc",k=setInterval(n,1E3),setTimeout(q,12E4),$("#PCForm").hide()):($("#PCForm").show(),clearInterval(k));$("#_loginTip").html(b);$(this).css("display","none").siblings("i").css("display","inline-block");$("._loginForm").hide();$("#"+a+"Form").show()});$("#_refreshScanCode").bind("click",
function(){p();$(".qrcode-img-failure").hide();k=setInterval(n,1E3);setTimeout(q,12E4)});var l=0,s=0;$("#weixinLogin").bind("click",function(){$("#scanCodeView").show();$("#weixinRefreshScanCode").hide();r()});$("#scanCodeView").hide();$("#closeScanCodeView").bind("click",function(){clearInterval(l);$("#scanCodeView").hide()});$("#weixinRefreshScanCode").bind("click",function(){$("#weixinRefreshScanCode").hide();clearInterval(l);r()})});
function saveSign(){$.post("/"+appId+"/handler/saveSign_handler.jsx",{},function(h){"0"==h.code&&(document.location.href="/ucenter/pwd_change.html")},"json")};