$(function(){function d(b){if(!(this instanceof d))return new d(b);this.option={postUrl:b.postUrl||"",getImgUrl:b.getImgUrl||"",httpStyle:b.httpStyle,success:"function"==typeof b.success?b.success:function(){}};this.moveSuccess=this.option.success}$.ajax({url:"/resources/plugin/JigsawValidateUtil/JigsawValidateUtil.text",dataType:"text",success:function(b){$("body").children(":last").after(b)}});var c=d.prototype;c.init=function(b){var a=this;"success"!=a.state&&(this.action=this.state="INIT",this.postData=
b,a.initImg(),a.initMatt(),a.initSlideBtn(),a.initIndicator(),this.moveX=0,this.maxMove=$("#JigsawValidateUtil_slide_bar").width()-$("#JigsawValidateUtil_slideBtn").width(),this.maxMove=parseInt(this.maxMove),b=$("body"),b.on("dblclick","#JigsawValidateUtil_backgroundImg",a,function(){a.initImg();a.initIndicator();a.initSlideBtn();a.initMatt()}),b.on("mousedown","#JigsawValidateUtil_slideBtn",{_this:a},function(a){var b=a.data._this;b.moveX=0;"success"!=b.state&&"INIT"==b.action&&(b.action="DOWN",
a.preventDefault(),a=a.clientX,b.blueBtn(),$(document).on("mousemove",{initX:a,_this:b},b.move),$(document).on("mouseup",{_this:b},b.up))}),b.on("click",".JigsawValidateUtil_TB_overlayBG",a.hide),b.on("click",".JigsawValidateUtil_TB_window .JigsawValidateUtil_close",a.hide))};c.move=function(b){var a=b.data._this;"DOWN"!=!a.action&&(a.action="MOVE",a.moveX=b.clientX-b.data.initX,$("#JigsawValidateUtil_slideBtn").off("mouseover").off("mouseout"),0>a.moveX?(a.initIndicator(),a.initSlideBtn(),a.initMatt()):
0<=a.moveX&&a.moveX<=a.maxMove?(a.blueBtn(),$("#JigsawValidateUtil_mattingImg").css("left",a.moveX+"px"),$("#JigsawValidateUtil_slide_indicator").css("border","1px solid #1991fa"),$("#JigsawValidateUtil_slide_indicator").css("width",a.moveX+$("#JigsawValidateUtil_slideBtn").width()+"px"),$("#JigsawValidateUtil_slideBtn").css("left",a.moveX+"px")):($("#JigsawValidateUtil_mattingImg").css("left",a.maxMove+"px"),$("#JigsawValidateUtil_slide_indicator").css("border","1px solid #1991fa"),$("#JigsawValidateUtil_slide_indicator").css("width",
a.maxMove+$("#JigsawValidateUtil_slideBtn").width()+"px"),$("#JigsawValidateUtil_slideBtn").css("left",a.maxMove+"px")))};c.up=function(b){b=b.data._this;"MOVE"!=!b.action&&(b.action="UP",$(document).off("mousemove"),$(document).off("mouseup"),b.postData.moveX=encrypt(b.moveX,kkV,iI),b.postData.boxWidth=encrypt($("#JigsawValidateUtil_slide_bar").width(),kkV,iI),b.checkMove(b.postData),b.action="INIT")};c.initImg=function(){this.state="INIT";var b={};b.ac=encrypt(acV,kkV,iI);$.post(this.option.getImgUrl,
b,function(a){if("0"==a.code){var b=a.bgFilePath;a=a.mattingFilePath;$("#JigsawValidateUtil_mattingImg").attr("src",a);$("#JigsawValidateUtil_backgroundImg").attr("src",b);$(".JigsawValidateUtil_TB_overlayBG").css("z-index","999");$(".JigsawValidateUtil_TB_overlayBG").fadeIn(500);$(".JigsawValidateUtil_TB_window").fadeIn()}else alert(a.msg)},"json")};c.checkMove=function(b){var a=this;window.alert=function(a){$(".JigsawValidateUtil_alert_text").text(a);$(".JigsawValidateUtil_alert_window").show();
$(".JigsawValidateUtil_alert_close").click(function(){$(".JigsawValidateUtil_alert_window").hide()});$(".JigsawValidateUtil_alert_bnt").click(function(){$(".JigsawValidateUtil_alert_window").hide()})};$.ajax({url:a.option.postUrl,type:a.option.httpStyle,data:b,async:!1,dataType:"json",success:function(b){b.result&&"0"==b.result.code?(a.rightIndicator(),setTimeout(function(){a.hide()},1E3),setTimeout(function(){a.moveSuccess(b)})):(a.wrongIndicator(),setTimeout(function(){$("#JigsawValidateUtil_mattingImg").animate({left:"0"},
200);$("#JigsawValidateUtil_slideBtn").animate({left:"0"},200);$("#JigsawValidateUtil_slideBtn").css("background-color","#ffffff");$("#JigsawValidateUtil_slide_icon").css("background-position","0px -26px");$("#JigsawValidateUtil_slideBtn").on("mouseover",a.blueBtn);$("#JigsawValidateUtil_slideBtn").on("mouseout",a.whiteBtn);$("#JigsawValidateUtil_slide_indicator").animate({width:"0px"},200);$("#JigsawValidateUtil_slide_indicator").css("background-color","#d1e9fe");$("#JigsawValidateUtil_slide_indicator").css("border",
"1px solid transparent");a.initImg()},500))}})};c.initMatt=function(){$("#JigsawValidateUtil_mattingImg").css("left","0px")};c.initSlideBtn=function(){$("#JigsawValidateUtil_slideBtn").css("left","0px");$("#JigsawValidateUtil_slideBtn").css("background-color","#ffffff");$("#JigsawValidateUtil_slide_icon").css("background-position","0px -26px");$("#JigsawValidateUtil_slideBtn").on("mouseover",this.blueBtn);$("#JigsawValidateUtil_slideBtn").on("mouseout",this.whiteBtn)};c.initIndicator=function(){$("#JigsawValidateUtil_slide_indicator").css("width",
"0px");$("#JigsawValidateUtil_slide_indicator").css("border","1px solid transparent");$("#JigsawValidateUtil_slide_indicator").css("background-color","#d1e9fe")};c.wrongIndicator=function(){this.state="FAIL";$("#JigsawValidateUtil_slide_icon").css("background-position","0px -83px");$("#JigsawValidateUtil_slide_indicator").css("background-color","#fce1e1");$("#JigsawValidateUtil_slide_indicator").css("border-color","#f57a7a");$("#JigsawValidateUtil_slideBtn").css("background-color","#f57a7a")};c.rightIndicator=
function(){this.state="success";$("#JigsawValidateUtil_slide_icon").css("background-position","0px 0px");$("#JigsawValidateUtil_slide_indicator").css("background-color","#d2f4ef");$("#JigsawValidateUtil_slide_indicator").css("border-color","#52ccba");$("#JigsawValidateUtil_slideBtn").css("background-color","#52ccba")};c.whiteBtn=function(){$("#JigsawValidateUtil_slideBtn").css("background-color","#fff");$(".JigsawValidateUtil_slideBtn span").css("background-position","0 -26px")};c.blueBtn=function(){$("#JigsawValidateUtil_slideBtn").css("background-color",
"#1991fa");$(".JigsawValidateUtil_slideBtn span").css("background-position","0 -13px")};c.show=function(b){this.init(b)};c.hide=function(){$(".JigsawValidateUtil_TB_overlayBG").fadeOut(1E3);$(".JigsawValidateUtil_TB_window").fadeOut(1E3)};window.JigsawValidateUtil=d});