$(function(){var f=$("#registerForm");jQuery.validator.addMethod("accountCheck",function(b,a){var c=/^[a-zA-Z]([a-zA-Z0-9(_)(\-)]+)$/;return this.optional(a)||c.test(b)},"\u7528\u6237\u540d\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u51cf\u53f7\u548c\u4e0b\u5212\u7ebf\uff0c\u4ee5\u5b57\u6bcd\u5f00\u5934");jQuery.validator.addMethod("mobile",function(b,a){var c=b.length,d=/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return this.optional(a)||11==c&&d.test(b)},"\u8bf7\u6b63\u786e\u586b\u5199\u60a8\u7684\u624b\u673a\u53f7\u7801");
jQuery.validator.addMethod("passwordConfirm",function(b,a){var c=$("#password").val();return this.optional(a)||c==b},"\u60a8\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4");var k=f.validate({errorElement:"div",errorClass:"fl wrong",focusInvalid:!1,ignore:"",rules:{loginId:{required:!0,accountCheck:!0,remote:"/"+appId+"/handler/judgeMemberField.jsx"},mobilePhone:{required:!0,mobile:!0,digits:!0,remote:"/"+appId+"/handler/judgeMemberField.jsx"},mobileValidateCode:{required:!0},parentId:{required:"#parentId:filled"},
password:{required:!0,rangelength:[6,20]},password_confirm:{required:!0,passwordConfirm:!0},protocol_check:{required:!0}},messages:{loginId:{required:"\u8bf7\u8bbe\u7f6e\u60a8\u7684\u767b\u5f55\u5e10\u53f7",remote:"\u5bf9\u4e0d\u8d77\uff0c\u6b64\u5e10\u53f7\u5df2\u6ce8\u518c\uff0c\u8bf7\u6362\u4e00\u4e2a"},mobilePhone:{required:"\u8bf7\u586b\u5199\u60a8\u7684\u624b\u673a\u53f7\u7801",digits:"\u624b\u673a\u53f7\u7801\u5e94\u4e3a\u6570\u5b57",rangelength:"\u624b\u673a\u53f7\u7801\u4e3a11\u4f4d\u6570\u5b57",
mobile:"\u8bf7\u6b63\u786e\u586b\u5199\u60a8\u7684\u624b\u673a\u53f7\u7801",remote:"\u5bf9\u4e0d\u8d77\uff0c\u6b64\u624b\u673a\u5df2\u6ce8\u518c\uff0c\u8bf7\u6362\u4e00\u4e2a"},mobileValidateCode:{required:"\u8bf7\u586b\u5199\u77ed\u4fe1\u9a8c\u8bc1\u7801"},password:{required:"\u8bf7\u8bbe\u7f6e\u60a8\u7684\u5bc6\u7801",rangelength:"\u5bc6\u7801\u8bbe\u7f6e\u652f\u63016-20\u4f4d\u5b57\u6bcd\u3001\u7b26\u53f7\u6216\u6570\u5b57\uff0c\u5bc6\u7801\u533a\u5206\u5927\u5c0f\u5199"},password_confirm:{required:"\u8bf7\u518d\u6b21\u8f93\u5165\u60a8\u7684\u5bc6\u7801"},
protocol_check:{required:"\u62b1\u6b49\uff0c\u5fc5\u987b\u540c\u610f\u534f\u8bae\u624d\u80fd\u5b8c\u6210\u6ce8\u518c\uff01"}},invalidHandler:function(b,a){},highlight:function(b){$(b).closest(".form-group").addClass("wrong")},unhighlight:function(b){$(b).closest(".form-group").removeClass("wrong")},errorPlacement:function(b,a){b.appendTo(a.closest("li").after())},success:function(b){b.closest(".form-group").removeClass("wrong")},submitHandler:function(b){$(b).ajaxSubmit({type:"post",url:"/"+appId+
"/handler/register_handler.jsx",dataType:"json",success:function(a){a.state?document.location.href=a.rurl?a.rurl:window.normalWebSite+"/index.jsp":"empty_loginId"==a.errorCode?(a=$(".form-group",b),a.html("\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d"),$("#loginId").addClass("wrong"),$("#loginId").focus()):"loginId_length_error"==a.errorCode?(a=$(".wrong[for\x3d'loginId']",b),a.html("\u8bf7\u786e\u8ba4\u60a8\u8f93\u5165\u7684\u7528\u6237\u540d\u57286-20\u5b57\u7b26"),$("#loginId").addClass("wrong"),
$("#loginId").focus()):"loginId_exist"==a.errorCode?(a=$(".wrong[for\x3d'loginId']",b),a.html("\u5bf9\u4e0d\u8d77\uff0c\u6b64\u7528\u6237\u540d\u5df2\u6ce8\u518c\uff0c\u8bf7\u6362\u4e00\u4e2a"),$("#loginId").addClass("wrong"),$("#loginId").focus()):"mobilePhone_exist"==a.errorCode?(a=$(".wrong[for\x3d'mobilePhone']",b),a.html("\u60a8\u8f93\u5165\u7684\u624b\u673a\u53f7\u7801\u5df2\u88ab\u6ce8\u518c\uff0c\u8bf7\u6362\u4e00\u4e2a\u3002"),$("#mobilePhone").addClass("wrong"),$("#mobilePhone").focus()):
"parentUser_notExist"==a.errorCode?(a=$(".wrong[for\x3d'parentId']",b),a.html("\u60a8\u586b\u5199\u7684\u63a8\u8350\u4eba\u4e0d\u5b58\u5728\uff0c\u8bf7\u786e\u8ba4\u540e\u91cd\u65b0\u586b\u5199\u3002"),$("#parentId").addClass("wrong")):"mobile_error"==a.errorCode?(a=$(".help-block[for\x3d'mobilePhone']",b),a.html("\u60a8\u8f93\u5165\u7684\u624b\u673a\u53f7\u7801\u6709\u8bef,\u8bf7\u91cd\u65b0\u8f93\u5165\u3002"),$("#mobilePhone").addClass("wrong"),$("#mobilePhone").focus()):"empty_captcha"==a.errorCode?
(a=$(".wrong[for\x3d'captcha']",b),a.html("\u8bf7\u586b\u5199\u9a8c\u8bc1\u7801"),$("#captcha").addClass("wrong"),$("#captcha").focus()):"captcha_error"==a.errorCode?(a=$(".wrong[for\x3d'captcha']",b),a.html("\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e"),$("#captcha").addClass("wrong"),$("#captcha").focus()):"phone_validate_code_empty"==a.errorCode?(a=$(".wrong[for\x3d'mobileValidateCode']",b),a.html("\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u53d1\u9001\u3002"),$("#mobileValidateCode").addClass("wrong"),
$("#mobileValidateCode").focus()):"phone_validate_code_overdue"==a.errorCode?(a=$(".wrong[for\x3d'mobileValidateCode']",b),a.html("\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u53d1\u9001\u3002"),$("#mobileValidateCode").addClass("wrong"),$("#mobileValidateCode").focus()):"phone_validate_code_error"==a.errorCode?(a=$(".wrong[for\x3d'mobileValidateCode']",b),a.html("\u77ed\u4fe1\u9a8c\u8bc1\u7801\u9519\u8bef"),$("#mobileValidateCode").addClass("wrong"),$("#mobileValidateCode").focus()):
"mobilePhone_error"==a.errorCode?(a=$(".wrong[for\x3d'mobilePhone']",b),a.html("\u624b\u673a\u53f7\u7801\u4e0d\u662f\u77ed\u4fe1\u9a8c\u8bc1\u624b\u673a"),$("#mobilePhone").addClass("wrong"),$("#mobilePhone").focus()):"mobile_exist"==a.errorCode?(a=$(".wrong[for\x3d'mobilePhone']",b),a.html("\u5bf9\u4e0d\u8d77\uff0c\u8be5\u624b\u673a\u5df2\u6ce8\u518c\uff0c\u8bf7\u6362\u4e00\u4e2a"),$("#mobilePhone").addClass("wrong"),$("#mobilePhone").focus()):alert(a.errorCode)}})}});$(".protocolPanel .btnLg").on("click",
function(){$(".protocolPanel").fadeOut();var b=$("span.checkbox",f);b.attr("data-checked","true").addClass("active");$("input:hidden",b).val("true")});var c=!1;$(".check_code");var g=$("#mobileBlock"),h=$("#mobileCodebindBtn"),e=JigsawValidateUtil({getImgUrl:"/JigsawValidateUtilPlugin/handler/gi.jsx",postUrl:"/"+appId+"/handler/getMobileCaptcha.jsx",httpStyle:"get",success:function(b){if(b.state){alert("\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u6210\u529f\u53d1\u51fa\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\u77ed\u4fe1\u3002");
c=!0;var a=Number(window.msgInterval);self.html(--a+"\u79d2");var e=setInterval(function(){a--;self.html(a+"\u79d2");0>=a&&(clearInterval(e),self.html("\u83b7\u53d6\u9a8c\u8bc1\u7801"),c=!1)},1E3)}else{var d="";"mobile_phone_empty"==b.errorCode?d="\u8bf7\u586b\u5199\u60a8\u7684\u624b\u673a\u53f7\u7801":"mobile_phone_exist"==b.errorCode?d="\u5bf9\u4e0d\u8d77\uff0c\u6b64\u624b\u673a\u5df2\u6ce8\u518c\uff0c\u8bf7\u6362\u4e00\u4e2a":"send_error"==b.errorCode?d="\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002":
"wait"==b.errorCode?d="\u53d1\u9001\u592a\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002":"active"==b.errorCode?d="\u77ed\u4fe1\u9a8c\u8bc1\u7801\u8fd8\u5728\u6709\u6548\u671f\u3002":"illegal_parameter"==b.errorCode?d="\u53c2\u6570\u975e\u6cd5\u3002":"refresh"==b.errorCode&&(d="\u64cd\u4f5c\u51fa\u73b0\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5\u3002");alert(d)}}});h.on("click",".bindBtn",function(){var b=$(".userphone",g),a=b.val(),a=$.trim(a),a=acV+"#"+a+"#"+acV;if(!k.element(b))return!1;
$(this);if(!c)return e.show({p:encrypt($.trim(a),kkV,iI)}),!1})});function calcValue(f,k){for(var c="",g="",h=k.split(","),e=0;e<h.length;e++){var b=parseInt(h[e]);0==e%2?c+=f.charAt(b):g+=f.charAt(b)}return"0."+c+g};